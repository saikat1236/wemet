<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Connect with strangers worldwide through free random video chat. Talk to people from different cultures in a safe, moderated environment.">
    <title>VideoChat - Talk to Strangers Worldwide</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
    <!-- Video Background -->
    <div class="video-background">
        <video autoplay muted loop playsinline>
            <source src="https://cdn.coverr.co/videos/coverr-abstract-particles-flowing-4742/1080p.mp4" type="video/mp4">
        </video>
    </div>

    <!-- Landing Page -->
    <div id="landing-page" class="page active">
        <div class="landing-container">
            <header class="landing-header">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                        <circle cx="20" cy="20" r="18" fill="url(#gradient1)"/>
                        <path d="M20 10 L20 30 M10 20 L30 20" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="gradient1" x1="0" y1="0" x2="40" y2="40">
                                <stop offset="0%" stop-color="#667eea"/>
                                <stop offset="100%" stop-color="#764ba2"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span>VideoChat</span>
                </div>
                <nav class="landing-nav">
                    <button class="nav-btn" id="login-btn">Login</button>
                    <button class="nav-btn primary" id="signup-btn">Sign Up</button>
                </nav>
            </header>

            <main class="landing-main">
                <div class="hero-content floating">
                    <h1 class="hero-title">
                        Connect with <span class="gradient-text">Strangers</span><br>
                        Around the World
                    </h1>
                    <p class="hero-subtitle">
                        Experience random video chat with people from different cultures.<br>
                        Safe, fast, and completely free.
                    </p>
                    <div class="cta-buttons">
                        <button class="cta-btn primary pulse-glow" id="guest-start-btn">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M10 2 L18 10 L10 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M18 10 L2 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Start as Guest
                        </button>
                        <button class="cta-btn secondary" id="signup-start-btn">Create Account</button>
                    </div>
                </div>

                <div class="features-grid">
                    <div class="feature-card stagger-item">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <circle cx="16" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                                <path d="M6 26 C6 20 10 18 16 18 C22 18 26 20 26 26" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3>Make New Friends</h3>
                        <p>Connect with interesting people from around the globe</p>
                    </div>

                    <div class="feature-card stagger-item">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <rect x="6" y="6" width="20" height="20" rx="3" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 6 L12 2 M20 6 L20 2 M6 12 L26 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h3>Secured Environment</h3>
                        <p>24/7 moderation ensures a safe chatting experience</p>
                    </div>

                    <div class="feature-card stagger-item">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16 4 L16 16 L24 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="16" cy="16" r="12" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3>Fast Connections</h3>
                        <p>Instant matching with optimized peer connections</p>
                    </div>

                    <div class="feature-card stagger-item">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <circle cx="16" cy="16" r="12" stroke="currentColor" stroke-width="2"/>
                                <path d="M16 8 L16 16 L22 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="16" cy="16" r="2" fill="currentColor"/>
                            </svg>
                        </div>
                        <h3>Global Reach</h3>
                        <p>Meet people from every corner of the world</p>
                    </div>
                </div>

                <!-- Demo Section -->
                <section class="demo-section">
                    <h2>How It Works</h2>
                    <div class="demo-grid">
                        <div class="demo-card stagger-item">
                            <div class="demo-video-container">
                                <video controls poster="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=800&h=450&fit=crop">
                                    <source src="https://cdn.coverr.co/videos/coverr-video-call-on-laptop-9142/1080p.mp4" type="video/mp4">
                                </video>
                            </div>
                            <h3>1. Start Chatting</h3>
                            <p>Click "Start as Guest" or create an account to begin. Grant camera and microphone permissions for the best experience.</p>
                        </div>

                        <div class="demo-card stagger-item">
                            <div class="demo-video-container">
                                <video controls poster="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=800&h=450&fit=crop">
                                    <source src="https://cdn.coverr.co/videos/coverr-friends-having-a-video-call-9143/1080p.mp4" type="video/mp4">
                                </video>
                            </div>
                            <h3>2. Get Matched</h3>
                            <p>Our smart matching system connects you with someone from anywhere in the world in seconds.</p>
                        </div>

                        <div class="demo-card stagger-item">
                            <div class="demo-video-container">
                                <video controls poster="https://images.unsplash.com/photo-1588196749597-9ff075ee6b5b?w=800&h=450&fit=crop">
                                    <source src="https://cdn.coverr.co/videos/coverr-woman-having-a-video-call-9144/1080p.mp4" type="video/mp4">
                                </video>
                            </div>
                            <h3>3. Connect & Chat</h3>
                            <p>Enjoy face-to-face conversations with text chat support. Click "Next" anytime to meet someone new!</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Chat Page -->
    <div id="chat-page" class="page">
        <div class="chat-container">
            <header class="chat-header">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 40 40" fill="none">
                        <circle cx="20" cy="20" r="18" fill="url(#gradient2)"/>
                        <path d="M20 10 L20 30 M10 20 L30 20" stroke="white" stroke-width="3" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="gradient2" x1="0" y1="0" x2="40" y2="40">
                                <stop offset="0%" stop-color="#667eea"/>
                                <stop offset="100%" stop-color="#764ba2"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span>VideoChat</span>
                </div>
                <div class="user-info">
                    <div class="coin-balance" id="coin-balance-display" title="Your Coins">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#FFD700" stroke="#B8860B" stroke-width="2"/>
                            <path d="M12 6V18M8 12H16" stroke="#B8860B" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <span id="coin-count">0</span>
                        <button class="add-coins-btn" id="open-wallet-btn">+</button>
                    </div>
                    <span class="username" id="current-username">Guest</span>
                    <button class="icon-btn" id="logout-btn" title="Logout">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M7 18 L3 18 C2 18 2 17 2 16 L2 4 C2 3 2 2 3 2 L7 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M14 14 L18 10 L14 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18 10 L7 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </header>

            <div class="chat-main">
                <div class="video-section">
                    <div class="video-grid">
                        <div class="video-container remote-video-container">
                            <video id="remote-video" autoplay playsinline></video>
                            <div class="video-overlay" id="remote-overlay">
                                <div class="status-message">
                                    <div class="spinner"></div>
                                    <p id="status-text">Click "Start" to begin</p>
                                </div>
                            </div>
                            <div class="partner-info" id="partner-info" style="display: none;">
                                <span id="partner-name">Stranger</span>
                            </div>
                        </div>

                        <div class="video-container local-video-container">
                            <video id="local-video" autoplay muted playsinline></video>
                            <div class="video-label">You</div>
                        </div>
                    </div>

                    <div class="controls">
                        <button class="control-btn" id="toggle-video-btn" title="Toggle Video">
                            <svg class="icon-on" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M23 7 L16 12 L23 17 Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" fill="currentColor"/>
                                <rect x="2" y="5" width="12" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <svg class="icon-off" width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: none;">
                                <path d="M2 2 L22 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M16 16 L14 16 L2 16 C2 16 2 16 2 15 L2 9 C2 8 2 8 3 8 L8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>

                        <button class="control-btn" id="toggle-audio-btn" title="Toggle Audio">
                            <svg class="icon-on" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="9" y="2" width="6" height="12" rx="3" stroke="currentColor" stroke-width="2"/>
                                <path d="M5 10 L5 12 C5 16 8 19 12 19 C16 19 19 16 19 12 L19 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M12 19 L12 22 M8 22 L16 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <svg class="icon-off" width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: none;">
                                <path d="M2 2 L22 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M15 9.5 L15 5 C15 3 14 2 12 2 C10 2 9 3 9 5 L9 12 C9 12.5 9.2 13 9.5 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>

                        <button class="control-btn primary" id="start-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <path d="M10 8 L16 12 L10 16 Z" fill="currentColor"/>
                            </svg>
                            Start
                        </button>

                        <button class="control-btn accent" id="next-btn" style="display: none;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M13 5 L20 12 L13 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M4 5 L11 12 L4 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Next
                        </button>

                        <button class="control-btn danger" id="stop-btn" style="display: none;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="6" y="6" width="12" height="12" rx="2" fill="currentColor"/>
                            </svg>
                            Stop
                        </button>

                        <button class="control-btn" id="toggle-chat-btn" title="Toggle Chat">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M21 15 C21 16 20 17 19 17 L7 17 L3 21 L3 5 C3 4 4 3 5 3 L19 3 C20 3 21 4 21 5 Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                                <circle cx="8" cy="10" r="1" fill="currentColor"/>
                                <circle cx="12" cy="10" r="1" fill="currentColor"/>
                                <circle cx="16" cy="10" r="1" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="chat-sidebar" id="chat-sidebar">
                    <div class="chat-header-bar">
                        <h3>Chat</h3>
                        <button class="icon-btn" id="close-chat-btn">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M4 4 L16 16 M16 4 L4 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="chat-messages" id="chat-messages">
                        <div class="chat-info">Start chatting with your partner!</div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" placeholder="Type a message..." maxlength="500">
                        <button class="send-btn" id="send-btn">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M2 10 L18 2 L10 18 L8 11 L2 10 Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Wallet Modal -->
    <div id="wallet-modal" class="modal">
        <div class="modal-content wallet-content">
            <div class="modal-header">
                <h2>Get Coins</h2>
                <button class="close-modal" data-modal="wallet-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M6 6 L18 18 M18 6 L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="wallet-grid">
                <div class="coin-package">
                    <div class="coin-amount">100 Coins</div>
                    <div class="coin-price">Free</div>
                    <button class="buy-btn" data-amount="100">Claim Daily</button>
                </div>
                <div class="coin-package popular">
                    <div class="package-tag">Popular</div>
                    <div class="coin-amount">500 Coins</div>
                    <div class="coin-price">$4.99</div>
                    <button class="buy-btn" data-amount="500">Buy Now</button>
                </div>
                <div class="coin-package">
                    <div class="coin-amount">1200 Coins</div>
                    <div class="coin-price">$9.99</div>
                    <button class="buy-btn" data-amount="1200">Buy Now</button>
                </div>
            </div>
            <p class="wallet-note">Coins can be used for premium features and gifts.</p>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Welcome Back</h2>
                <button class="close-modal" data-modal="login-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M6 6 L18 18 M18 6 L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required placeholder="••••••••">
                </div>
                <button type="submit" class="submit-btn">Login</button>
                <p class="form-footer">
                    Don't have an account? <a href="#" id="switch-to-signup">Sign up</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signup-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Account</h2>
                <button class="close-modal" data-modal="signup-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M6 6 L18 18 M18 6 L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="signup-form" class="auth-form">
                <div class="form-group">
                    <label for="signup-username">Username</label>
                    <input type="text" id="signup-username" required placeholder="Choose a username" minlength="3" maxlength="20">
                </div>
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" required placeholder="••••••••" minlength="6">
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="age-confirm" required>
                        <span>I confirm that I am 18 years or older</span>
                    </label>
                </div>
                <button type="submit" class="submit-btn">Sign Up</button>
                <p class="form-footer">
                    Already have an account? <a href="#" id="switch-to-login">Login</a>
                </p>
            </form>
        </div>
    </div>

    <script src="signaling.js"></script>
    <script src="webrtc.js"></script>
    <script src="app.js"></script>
</body>
</html>
